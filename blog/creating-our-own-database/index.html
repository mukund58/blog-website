<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><meta content="index, follow" name=robots><title>Creating our own Database</title><meta content="Creating our own Database" name=title><meta content=aryucrazy name=author><meta content="Dont be script kidde" name=description><meta content=website property=og:type><meta content=https://www3.scriptless.tech/blog/creating-our-own-database/ property=og:url><meta content="Cursed Blog" property=og:site_name><meta content="Creating our own Database" property=og:title><meta content="Dont be script kidde" property=og:description><meta content=https://www3.scriptless.tech/favicon.ico property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://www3.scriptless.tech/blog/creating-our-own-database/ property=twitter:url><meta content="Creating our own Database" property=twitter:title><meta content="Dont be script kidde" property=twitter:description><meta content=https://www3.scriptless.tech/favicon.ico property=twitter:image><link href=https://www3.scriptless.tech/blog/creating-our-own-database/ rel=canonical><link rel="shortcut icon" href=https://www3.scriptless.tech/favicon.ico type=image/x-icon><link href=https://www3.scriptless.tech/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://speyll.github.io/suCSS/reset-min.css rel=stylesheet><link href=https://speyll.github.io/suCSS/suCSS-min.css rel=stylesheet><link href=https://www3.scriptless.tech/css/style.css rel=stylesheet><script defer src=https://www3.scriptless.tech/js/script.js></script><body><header><nav id=nav-bar><a href=/> /home/ </a><a href=/about> /about/ </a><a href=/journal> /journal/ </a><a href=/blog> /blog/ </a><div><input id=theme-toggle style=display:none type=checkbox><label for=theme-toggle id=theme-toggle-label><svg class=icons id=theme-icon><use href=https://www3.scriptless.tech/icons.svg#lightMode></use></svg></label><audio id=theme-sound><source src=https://www3.scriptless.tech/click.ogg type=audio/ogg></audio></div></nav></header><main><div><a href=..>..</a>/<span class=accent-data>creating-our-own-database</span></div><time datetime=2024-07-27>Published on: <span class=accent-data>2024-07-27</span></time><address rel=author>By <span class=accent-data>aryucrazy</span></address><h1>Creating our own Database</h1><h2>Table of contents</h2><ul><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#what-database-schema>What Database Schema ?</a><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#inserting-data>Inserting Data</a><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#export-as-csv>Export as .csv</a><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#import-as-csv>Import as .csv</a> <ul><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#import-data-file-mfa-csv-without-id-value>Import data file (mfa.csv) without id value</a> <ul></ul></ul><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#deleting-data>Deleting Data</a><li><a href=https://www3.scriptless.tech/blog/creating-our-own-database/#updating-data>Updating Data</a></ul><h3 id=what-database-schema>What Database Schema ?</h3><p>Database schema defines how data is organized within a relational database; this is inclusive of logical constraints such as, table names, fields, data types and the relationships between these entities.<p>Create database schema<pre class=language-bash data-lang=bash style=background:#282828;color:#fdf4c1aa><code class=language-bash data-lang=bash><span style=color:#fdf4c1>$ vim schema.sql
</span></code></pre><p>write in your schema file<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>CREATE TABLE </span><span>IF NOT EXISTS "</span><span style=color:#8ec07c>collection</span><span>"(
</span><span>        </span><span style=color:#b8bb26>"id" </span><span style=color:#fa5c4b>INTEGER</span><span>,
</span><span>        </span><span style=color:#b8bb26>"title" </span><span style=color:#fa5c4b>TEXT </span><span style=color:#fe8019>NOT </span><span style=color:#d3869b>NULL</span><span>,
</span><span>        </span><span style=color:#b8bb26>"accesion_number"  </span><span style=color:#fa5c4b>TEXT </span><span style=color:#fe8019>NOT </span><span style=color:#d3869b>NULL</span><span> UNIQUE,
</span><span>        </span><span style=color:#b8bb26>"acquired" </span><span style=color:#fa5c4b>NUMERIC</span><span>,
</span><span>        </span><span style=color:#fa5c4b>PRIMARY KEY</span><span>(</span><span style=color:#b8bb26>"id"</span><span>)
</span><span>);
</span></code></pre><p>Now create database<pre class=language-bash data-lang=bash style=background:#282828;color:#fdf4c1aa><code class=language-bash data-lang=bash><span style=color:#fdf4c1>$ sqlite3 mfa.db
</span></code></pre><p>Import schmea in our database<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span>.read </span><span style=color:#b8bb26>schema</span><span>.</span><span style=color:#b8bb26>sql
</span></code></pre><p>To read what’s inside schmea file<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span>.schema
</span></code></pre><p>So we are ready to to insert our data<h3 id=inserting-data>Inserting Data</h3><pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>INSERT INTO </span><span style=color:#b8bb26>"collection"</span><span> (</span><span style=color:#b8bb26>"id"</span><span>, </span><span style=color:#b8bb26>"title"</span><span>, </span><span style=color:#b8bb26>"accesion_number"</span><span>, </span><span style=color:#b8bb26>"acquired"</span><span>)
</span><span style=color:#fa5c4b>VALUES</span><span> (</span><span style=color:#d3869b>1</span><span>,</span><span style=color:#b8bb26>'art of swordship'</span><span>,</span><span style=color:#b8bb26>'32.43'</span><span>,</span><span style=color:#b8bb26>'2024-28-09'</span><span>);
</span><span>
</span></code></pre><p>You can see inserted data by<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>SELECT </span><span style=color:#fdf4c1>* </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"collection"
</span></code></pre><p>output<pre style=background:#282828;color:#fdf4c1aa><code><span>1|art of swordship|32.43|2024-28-09
</span></code></pre><h3 id=export-as-csv>Export as .csv</h3><p>Change mode to csv<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span>.mode csv
</span><span>.output </span><span style=color:#b8bb26>mfa</span><span>.</span><span style=color:#b8bb26>csv
</span><span>.header on 
</span><span style=color:#fa5c4b>SELECT </span><span style=color:#fdf4c1>* </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"collection"</span><span>;
</span><span>.quit
</span></code></pre><p>Headers: Use the <code>.header on</code> command before the query to include column names as the first row in the CSV file<p>mfa.csv<pre style=background:#282828;color:#fdf4c1aa><code><span>id,title,accesion_number,acquired
</span><span>1,"art of swordship",32.43,2024-28-09
</span><span>2,"art of fighting",22.43,2024-28-02
</span></code></pre><h3 id=import-as-csv>Import as .csv</h3><p>we hava mfa.csv<pre style=background:#282828;color:#fdf4c1aa><code><span>id,title,accesion_number,acquired
</span><span>3,"art doing hardwork",892.43,2024-18-09
</span><span>4,"Life is always ok",92.93,2024-29-0
</span></code></pre><p>To import in our database<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span>.import </span><span style=font-style:italic;color:#928374>--csv --skip 1 mfa.csv collection
</span></code></pre><p><code>collection</code> is table name<p><code>--csv</code> is output formate<p><code>--skip 1</code> is for igonore first row<p>To check you datbase is updated you can use SELECT query<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>SELECT </span><span style=color:#fdf4c1>* </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"colllection"
</span></code></pre><h4 id=import-data-file-mfa-csv-without-id-value>Import data file (mfa.csv) without id value</h4><p>mfa.csv<pre style=background:#282828;color:#fdf4c1aa><code><span>title,accesion_number,acquired
</span><span>"art of swordship",32.43,2024-28-09
</span><span>"art of fighting",22.43,2024-28-02
</span><span>"art doing hardwork",892.43,2024-18-09
</span><span>"Life is always ok",92.93,2024-29-09
</span></code></pre><p>To import in data file in database<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span>.import </span><span style=font-style:italic;color:#928374>--csv mfa.csv temp
</span></code></pre><p>Here we store in tempoary table after we will insert this data into collection table<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>INSERT INTO </span><span style=color:#b8bb26>"collection"</span><span> (</span><span style=color:#b8bb26>"title"</span><span>,</span><span style=color:#b8bb26>"accesion_number"</span><span>,</span><span style=color:#b8bb26>"acquired"</span><span>)
</span><span style=color:#fa5c4b>SELECT </span><span style=color:#b8bb26>"title"</span><span>, </span><span style=color:#b8bb26>"accesion_number"</span><span>, </span><span style=color:#b8bb26>"acquired" </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"temp"</span><span> ;
</span></code></pre><p>Now you can check<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>SELECT </span><span style=color:#fdf4c1>* </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"collection"
</span></code></pre><p>output<pre style=background:#282828;color:#fdf4c1aa><code><span>1|art of swordship|32.43|2024-28-09
</span><span>2|art of fighting|22.43|2024-28-02
</span><span>3|art doing hardwork|892.43|2024-18-09
</span><span>4|Life is always ok|92.93|2024-29-09
</span></code></pre><h3 id=deleting-data>Deleting Data</h3><p>To delete all rows in table<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>DELETE FROM </span><span style=color:#b8bb26>"collection"
</span></code></pre><p>To Delete at speific range<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>DELETE FROM </span><span style=color:#b8bb26>"collection" </span><span style=color:#fa5c4b>WHERE </span><span style=color:#b8bb26>"id" </span><span style=color:#fe8019>></span><span style=color:#d3869b>2
</span></code></pre><p>it will delete all rows which is greater than 2<p>To Delete Table<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>DROP TABLE </span><span style=color:#b8bb26>"collection"
</span></code></pre><p>Consider now an updated schema for the MFA database, containing information not just about artwork but also artists. The two entities Artist and Collection have a many-to-many relationship—a painting can be created by many artists and a single artist can also create many pieces of artwork.<div><img alt="theme logo" src=https://cs50.harvard.edu/sql/2024/notes/3/images/29.jpg></div><ul><li><p>Here is a database implementing the above ER Diagram</p> <div><img alt="theme logo" src=https://cs50.harvard.edu/sql/2024/notes/3/images/30.jpg></div></ul><p>The <code>artists</code> and <code>collections</code> tables have primary keys. The created table references these IDs in its two foreign key columns.<ul><li><code>ON DELETE RESTRICT</code>: This restricts us from deleting IDs when the foreign key constraint is violated.<li><code>ON DELETE NO ACTION</code>: This allows the deletion of IDs that are referenced by a foreign key and nothing happens.<li><code>ON DELETE SET NULL</code>: This allows the deletion of IDs that are referenced by a foreign key and sets the foreign key references to NULL.<li><code>ON DELETE SET DEFAULT</code>: This does the same as the previous, but allows us to set a default value instead of NULL.<li><code>ON DELETE CASCADE</code>: This allows the deletion of IDs that are referenced by a foreign key and also proceeds to cascadingly delete the referencing foreign key rows. For example, if we used this to delete an artist ID, all the artist’s affiliations with the artwork would also be deleted from the created table.</ul><h3 id=updating-data>Updating Data</h3><p>Here is the syntax of the update command.<div><img alt="theme logo" src=https://cs50.harvard.edu/sql/2024/notes/3/images/49.jpg></div><p>There are two ways of writing query Let’s change this affiliation for “Profusion of flowers” in the created table using the above syntax.<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span> </span><span style=color:#fa5c4b>UPDATE </span><span style=color:#b8bb26>"created"  </span><span style=color:#fa5c4b>SET </span><span style=color:#b8bb26>"artist_id" </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>'3' </span><span style=color:#fa5c4b>WHERE </span><span style=color:#b8bb26>"collection_id" </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>'3'
</span></code></pre><p>or<pre class=language-sql data-lang=sql style=background:#282828;color:#fdf4c1aa><code class=language-sql data-lang=sql><span style=color:#fa5c4b>UPDATE </span><span style=color:#b8bb26>"created" </span><span style=color:#fa5c4b>SET </span><span style=color:#b8bb26>"artist_id"</span><span style=color:#fe8019>=</span><span> (
</span><span> </span><span style=color:#fa5c4b>SELECT </span><span style=color:#b8bb26>"id" </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"artists"
</span><span style=color:#fa5c4b>WHERE </span><span style=color:#b8bb26>"name" </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>'Qian Weicheng'
</span><span style=color:#fa5c4b>WHERE </span><span style=color:#b8bb26>"collection_id" </span><span style=color:#fe8019>=</span><span> (
</span><span style=color:#fa5c4b>SELECT </span><span style=color:#b8bb26>"id" </span><span style=color:#fa5c4b>FROM </span><span style=color:#b8bb26>"collections"
</span><span style=color:#fa5c4b>WHERE </span><span style=color:#b8bb26>"title" </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>'Profusion of flowers'
</span></code></pre><p>output<pre style=background:#282828;color:#fdf4c1aa><code><span>1|2
</span><span>3|3
</span><span>3|1
</span><span>4|4
</span></code></pre><ul><li><p>ok lets meet again on another blog 🆗</p><li><p>Thank You for reading to the end 🙂</p></ul><span class=webring> <a class=no-style href=../><svg class=icons><use href=https://www3.scriptless.tech/icons.svg#chevronLeft></use></svg></a> <a href=#>Go Top </a> <a class=no-style href=../introduction-to-database-with-sql><svg class=icons><use href=https://www3.scriptless.tech/icons.svg#chevronRight></use></svg></a></span><p class=tags-data></main><footer><hr><div id=footer-container><div><p>Theme and color theme licensed under <a rel="noopener noreferrer" href=https://en.wikipedia.org/wiki/Licence_MIT target=_blank>MIT</a>.<br> Built with <a rel="noopener noreferrer" href=https://www.getzola.org target=_blank>Zola</a> using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> theme, <a rel="noopener noreferrer" href=https://speyll.github.io/suCSS/ target=_blank>suCSS</a> framework & <a rel="noopener noreferrer" href=https://github.com/Speyll/veqev target=_blank>veqev</a>.<br></div><div><a rel="noopener noreferrer" title="Subscribe via RSS for updates." class=no-style href=https://www3.scriptless.tech/atom.xml target=_blank><svg class=icons><use href=https://www3.scriptless.tech/icons.svg#rss></use></svg></a></div></div></footer>